<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <data>

        <record id="rule_for_operators_maquina" model="ir.rule">
            <field name="name">Visibility for Operators</field>
            <field name="model_id" ref="foundation_management.model_foundation_maquina"/>
            <field name="groups" eval="[(4, ref('foundation_management.group_operadores'))]"/>
            <field name="domain_force">[('operador_user_id', '=', user.id)]</field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>
        <record id="rule_for_operators_maquina_registro" model="ir.rule">
            <field name="name">Visibility for Operators</field>
            <field name="model_id" ref="foundation_management.model_foundation_maquina_registro"/>
            <field name="groups" eval="[(4, ref('foundation_management.group_operadores'))]"/>
            <field name="domain_force">[('operador_user_id', '=', user.id)]</field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>

        <record id="rule_for_operators_chamada" model="ir.rule">
            <field name="name">Visibility for Operators</field>
            <field name="model_id" ref="foundation_management.model_foundation_chamada"/>
            <field name="groups" eval="[(4, ref('foundation_management.group_operadores'))]"/>
            <field name="domain_force">
                [('maquina_id', 'in', user.employee_ids.mapped('machine_id.id'))]
            </field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>


        <record id="rule_for_operators_relatorios" model="ir.rule">
            <field name="name">Visibility for Operators</field>
            <field name="model_id" ref="foundation_management.model_foundation_relatorios"/>
            <field name="groups" eval="[(4, ref('foundation_management.group_operadores'))]"/>
            <field name="domain_force">[('operador_user_id', '=', user.id)]</field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>
        <!-- Regra para negar acesso a vendas para o grupo Operadores -->
        <record id="sale_order_no_access_operadores" model="ir.rule">
            <field name="name">Operadores No Access to Sales Order</field>
            <field name="model_id" ref="sale.model_sale_order"/>
            <field name="groups" eval="[(4, ref('foundation_management.group_operadores'))]"/>
            <field name="domain_force">[('id', '=', False)]</field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>
        <record id="rule_res_users_operadores" model="ir.rule">
            <field name="name">Restrição de Funcionários para Operadores</field>
            <field name="model_id" ref="base.model_res_users"/>
            <field name="domain_force" eval="[('groups_id', 'in', [ref('foundation_management.group_operadores')])]"/>
            <field name="groups" eval="[(4, ref('foundation_management.group_operadores'))]"/>
        </record>

    </data>
</odoo>