<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- Kanban View para Stock Quant -->
        <record id="view_foundation_stock_quant_saida_kanban" model="ir.ui.view">
            <field name="name">stock.quant.kanban.foundation</field>
            <field name="model">stock.quant</field>
            <field name="arch" type="xml">
                <kanban>
                    <field name="product_id"/>
                    <field name="quantity"/>
                    <field name="location_id"/> <!-- Necessário para context -->
                    <field name="specific_stock_output_id"/> <!-- Necessário para context -->
                    <field name="analytic_account_id"/> <!-- Necessário para context -->
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click">
                                <div class="oe_kanban_image">
                                    <img t-att-src="kanban_image('product.product', 'image_128', record.product_id.raw_value)" alt="Product Image"/>
                                </div>
                                <div class="oe_kanban_details">
                                    <strong><field name="product_id"/></strong>
                                    <p>Qty: <field name="quantity"/></p>
                                    <button name="action_use_product"
                                            type="object"
                                            string="Usar"
                                            class="btn btn-primary"
                                            context="{
                                                'default_location_id': record.location_id.raw_value,
                                                'default_location_dest_id': record.specific_stock_output_id.raw_value,
                                                'default_analytic_account_id': record.analytic_account_id.raw_value
                                            }"/>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <!-- Ação para abrir a vista Kanban de Stock Quant baseado em FoundationMaquinaRegistro -->
        <record id="action_stock_quant_kanban_foundation_maquina_saida_registro" model="ir.actions.act_window">
            <field name="name">Saldo de Estoque</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.quant</field>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="view_foundation_stock_quant_saida_kanban"/>
            <field name="domain">[('location_id', '=', context.get('specific_stock_location_id'))]</field>
        </record>
    </data>
</odoo>
